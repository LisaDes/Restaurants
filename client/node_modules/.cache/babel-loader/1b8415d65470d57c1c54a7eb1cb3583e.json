{"remainingRequest":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\src\\components\\ListeDesRestaurants.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\src\\components\\ListeDesRestaurants.vue","mtime":1632835755562},{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xpc3RlRGVzUmVzdGF1cmFudHMnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXN0YXVyYW50czogW10sCiAgICAgIG5hbWU6ICcnLAogICAgICBjdWlzaW5lOiAnJywKICAgICAgdG90YWxSZXN0YXVyYW50OiAwLAogICAgICBwYWdlOiAwLAogICAgICBwYWdlU2l6ZTogMTAsCiAgICAgIG5iUGFnZVRvdGFsOiAwLAogICAgICBub21SZWNoZXJjaGU6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcGFnZVByZWNlZGVudDogZnVuY3Rpb24gcGFnZVByZWNlZGVudCgpIHsKICAgICAgaWYgKHRoaXMucGFnZSA9PT0gMCkgcmV0dXJuOwogICAgICB0aGlzLnBhZ2UtLTsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50RnJvbVNlcnZlcigpOwogICAgfSwKICAgIHBhZ2VTdWl2YW50ZTogZnVuY3Rpb24gcGFnZVN1aXZhbnRlKCkgewogICAgICBpZiAodGhpcy5wYWdlID09PSB0aGlzLmRlcm5pZXJlUGFnZSkgcmV0dXJuOwogICAgICB0aGlzLnBhZ2UrKzsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50RnJvbVNlcnZlcigpOwogICAgfSwKICAgIGdldFJlc3RhdXJhbnRGcm9tU2VydmVyOiBmdW5jdGlvbiBnZXRSZXN0YXVyYW50RnJvbVNlcnZlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cz8iOwogICAgICB1cmwgKz0gInBhZ2U9IiArIHRoaXMucGFnZTsKICAgICAgdXJsICs9ICImcGFnZXNpemU9IiArIHRoaXMucGFnZVNpemU7CiAgICAgIHVybCArPSAiJm5hbWU9IiArIHRoaXMubm9tUmVjaGVyY2hlOwogICAgICBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlSlNPTikgewogICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkudGhlbihmdW5jdGlvbiAocmVzSlMpIHsKICAgICAgICAgIC8vIE1haW50ZW5hbnQgcmVzIGVzdCB1biB2cmFpIG9iamV0IEphdmFTY3JpcHQKICAgICAgICAgIF90aGlzLnJlc3RhdXJhbnRzID0gcmVzSlMuZGF0YTsKICAgICAgICAgIF90aGlzLnRvdGFsUmVzdGF1cmFudCA9IHJlc0pTLmNvdW50OwogICAgICAgICAgX3RoaXMubmJQYWdlVG90YWwgPSBNYXRoLnJvdW5kKF90aGlzLnRvdGFsUmVzdGF1cmFudCAvIF90aGlzLnBhZ2VTaXplKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGNoZXJjaGVyUmVzdGF1cmFudDogXy5kZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudEZyb21TZXJ2ZXIoKTsKICAgIH0sIDMwMCksCiAgICBzdXBwcmltZXJSZXN0YXVyYW50OiBmdW5jdGlvbiBzdXBwcmltZXJSZXN0YXVyYW50KGluZGV4KSB7CiAgICAgIHRoaXMucmVzdGF1cmFudHMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICBham91dGVyUmVzdGF1cmFudDogZnVuY3Rpb24gYWpvdXRlclJlc3RhdXJhbnQoJGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8gUsOpY3Vww6lyYXRpb24gZHUgZm9ybXVsYWlyZS4gUGFzIGJlc29pbiBkZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yCiAgICAgIC8vIG91IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIHB1aXNxdWUgYydlc3QgbGUgZm9ybXVsYWlyZSBxdWkgYSBnw6luw6lyw6kKICAgICAgLy8gbCfDqXbDqW5lbWVudAogICAgICB2YXIgZm9ybSA9ICRldmVudC50YXJnZXQ7IC8vIFLDqWN1cMOpcmF0aW9uIGRlcyB2YWxldXJzIGRlcyBjaGFtcHMgZHUgZm9ybXVsYWlyZQogICAgICAvLyBlbiBwcsOpdmlzaW9uIGQndW4gZW52b2kgbXVsdGlwYXJ0IGVuIGFqYXgvZmV0Y2gKCiAgICAgIHZhciBkb25uZWVzRm9ybXVsYWlyZSA9IG5ldyBGb3JtRGF0YShmb3JtKTsKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzIjsKICAgICAgZmV0Y2godXJsLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgYm9keTogZG9ubmVlc0Zvcm11bGFpcmUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2VKU09OKSB7CiAgICAgICAgcmVzcG9uc2VKU09OLmpzb24oKS50aGVuKGZ1bmN0aW9uIChyZXNKUykgewogICAgICAgICAgLy8gTWFpbnRlbmFudCByZXMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdAogICAgICAgICAgY29uc29sZS5sb2cocmVzSlMubXNnKTsKCiAgICAgICAgICBfdGhpczIuZ2V0UmVzdGF1cmFudEZyb21TZXJ2ZXIoKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgICB0aGlzLm5hbWUgPSAiIjsKICAgICAgdGhpcy5jdWlzaW5lID0gIiI7CiAgICB9LAogICAgZ2V0Q29sb3I6IGZ1bmN0aW9uIGdldENvbG9yKGluZGV4KSB7CiAgICAgIHJldHVybiBpbmRleCAlIDIgPyAnbGlnaHRCbHVlJyA6ICdwaW5rJzsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFJlc3RhdXJhbnRGcm9tU2VydmVyKCk7CiAgfQp9Ow=="},{"version":3,"sources":["ListeDesRestaurants.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"hello\">\r\n    <form @submit=\"ajouterRestaurant($event)\">\r\n        <label>\r\n            Nom : <input name=\"nom\" type=\"text\" required v-model=\"name\">\r\n        </label>\r\n        <label>\r\n            Cuisine : <input name=\"cuisine\" type=\"text\" required v-model=\"cuisine\">\r\n        </label>\r\n\r\n        <md-button>Ajouter</md-button>\r\n    </form>\r\n\r\n    <h1>Nombre de restaurants : {{totalRestaurant}}</h1>\r\n    <p>Chercher par nom : <input @input=\"chercherRestaurant()\" type=\"text\" v-model=\"nomRecherche\"></p>\r\n    <p>Nombre de page total : {{nbPageTotal}}</p>\r\n    <p>Nombre de restaurant par page : \r\n        <input \r\n        @change=\"getRestaurantFromServer()\"\r\n        type=\"range\" min=2 max=100 value=10 v-model=\"pageSize\"\r\n        >{{pageSize}}</p>\r\n    <md-button class=\"md-raised\" :disabled=\"page===0\" @click=\"pagePrecedent()\">Précédent</md-button>&nbsp;&nbsp;\r\n    <md-button class=\"md-raised\" :disabled=\"page===nbPageTotal\" @click=\"pageSuivante()\">Suivant</md-button>&nbsp;\r\n    Page courante : {{page}}\r\n    <br>\r\n    <md-table v-model=\"restaurants\" md-sort=\"name\" md-sort-order=\"asc\">\r\n        <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\">\r\n          <md-table-cell md-label=\"Nom\">{{ item.name }}</md-table-cell>\r\n          <md-table-cell md-label=\"Cuisine\">{{ item.cuisine }}</md-table-cell>\r\n        </md-table-row>\r\n    </md-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\";\r\n\r\nexport default {\r\n  name: 'ListeDesRestaurants',\r\n  data: function() { \r\n            return {\r\n                restaurants: [],\r\n                name: '',\r\n                cuisine: '',\r\n                totalRestaurant: 0,\r\n                page: 0,\r\n                pageSize: 10,\r\n                nbPageTotal: 0,\r\n                nomRecherche: ''\r\n            }\r\n    },\r\n        methods: {\r\n            pagePrecedent() {\r\n                if (this.page === 0) return;\r\n                this.page--;\r\n                this.getRestaurantFromServer();\r\n            },\r\n            pageSuivante() {\r\n                if (this.page === this.dernierePage) return;\r\n                this.page++;\r\n                this.getRestaurantFromServer();\r\n            },\r\n            getRestaurantFromServer() {\r\n                let url = \"http://localhost:8080/api/restaurants?\";\r\n                url += \"page=\" + this.page;\r\n                url += \"&pagesize=\" + this.pageSize;\r\n                url += \"&name=\" + this.nomRecherche;\r\n\r\n                fetch(url)\r\n                    .then((responseJSON) => {\r\n                        responseJSON.json()\r\n                            .then((resJS) => {\r\n                                // Maintenant res est un vrai objet JavaScript\r\n                                this.restaurants = resJS.data;\r\n                                this.totalRestaurant = resJS.count;\r\n                                this.nbPageTotal = Math.round(this.totalRestaurant / this.pageSize);\r\n                            });\r\n                    })\r\n                    .catch((err) => {\r\n                        console.log(err);\r\n                    });\r\n            },\r\n            chercherRestaurant:\r\n                _.debounce(function () {\r\n                    this.getRestaurantFromServer()\r\n                }, 300),\r\n            \r\n            supprimerRestaurant(index) {\r\n                this.restaurants.splice(index, 1);\r\n            },\r\n            ajouterRestaurant($event) {\r\n                // Récupération du formulaire. Pas besoin de document.querySelector\r\n                // ou document.getElementById puisque c'est le formulaire qui a généré\r\n                // l'événement\r\n                let form = $event.target;\r\n\r\n                // Récupération des valeurs des champs du formulaire\r\n                // en prévision d'un envoi multipart en ajax/fetch\r\n                let donneesFormulaire = new FormData(form);\r\n\r\n                let url = \"http://localhost:8080/api/restaurants\";\r\n\r\n                fetch(url, {\r\n                    method: \"POST\",\r\n                    body: donneesFormulaire\r\n                })\r\n                    .then((responseJSON) => {\r\n                        responseJSON.json()\r\n                            .then((resJS) => {\r\n                                // Maintenant res est un vrai objet JavaScript\r\n                                console.log(resJS.msg)\r\n                                this.getRestaurantFromServer();\r\n                            });\r\n                    })\r\n                    .catch(function (err) {\r\n                        console.log(err);\r\n                    });\r\n\r\n                this.name = \"\";\r\n                this.cuisine = \"\";\r\n            },\r\n            getColor(index) {\r\n                return (index % 2) ? 'lightBlue' : 'pink';\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getRestaurantFromServer();\r\n        }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n"],"sourceRoot":"src/components"}]}