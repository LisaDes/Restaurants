{"remainingRequest":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\src\\components\\ListeDesRestaurants.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\src\\components\\ListeDesRestaurants.vue","mtime":1632835755562},{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lily\\Documents\\Cours\\MASTER 1\\WEB\\TP 3\\tp3\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgXyBmcm9tICJsb2Rhc2giOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdMaXN0ZURlc1Jlc3RhdXJhbnRzJywNCiAgZGF0YTogZnVuY3Rpb24oKSB7IA0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICByZXN0YXVyYW50czogW10sDQogICAgICAgICAgICAgICAgbmFtZTogJycsDQogICAgICAgICAgICAgICAgY3Vpc2luZTogJycsDQogICAgICAgICAgICAgICAgdG90YWxSZXN0YXVyYW50OiAwLA0KICAgICAgICAgICAgICAgIHBhZ2U6IDAsDQogICAgICAgICAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICAgICAgICAgIG5iUGFnZVRvdGFsOiAwLA0KICAgICAgICAgICAgICAgIG5vbVJlY2hlcmNoZTogJycNCiAgICAgICAgICAgIH0NCiAgICB9LA0KICAgICAgICBtZXRob2RzOiB7DQogICAgICAgICAgICBwYWdlUHJlY2VkZW50KCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2UgPT09IDApIHJldHVybjsNCiAgICAgICAgICAgICAgICB0aGlzLnBhZ2UtLTsNCiAgICAgICAgICAgICAgICB0aGlzLmdldFJlc3RhdXJhbnRGcm9tU2VydmVyKCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgcGFnZVN1aXZhbnRlKCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2UgPT09IHRoaXMuZGVybmllcmVQYWdlKSByZXR1cm47DQogICAgICAgICAgICAgICAgdGhpcy5wYWdlKys7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRSZXN0YXVyYW50RnJvbVNlcnZlcigpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGdldFJlc3RhdXJhbnRGcm9tU2VydmVyKCkgew0KICAgICAgICAgICAgICAgIGxldCB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cz8iOw0KICAgICAgICAgICAgICAgIHVybCArPSAicGFnZT0iICsgdGhpcy5wYWdlOw0KICAgICAgICAgICAgICAgIHVybCArPSAiJnBhZ2VzaXplPSIgKyB0aGlzLnBhZ2VTaXplOw0KICAgICAgICAgICAgICAgIHVybCArPSAiJm5hbWU9IiArIHRoaXMubm9tUmVjaGVyY2hlOw0KDQogICAgICAgICAgICAgICAgZmV0Y2godXJsKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2VKU09OKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUpTT04uanNvbigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc0pTKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1haW50ZW5hbnQgcmVzIGVzdCB1biB2cmFpIG9iamV0IEphdmFTY3JpcHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0YXVyYW50cyA9IHJlc0pTLmRhdGE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxSZXN0YXVyYW50ID0gcmVzSlMuY291bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmJQYWdlVG90YWwgPSBNYXRoLnJvdW5kKHRoaXMudG90YWxSZXN0YXVyYW50IC8gdGhpcy5wYWdlU2l6ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBjaGVyY2hlclJlc3RhdXJhbnQ6DQogICAgICAgICAgICAgICAgXy5kZWJvdW5jZShmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudEZyb21TZXJ2ZXIoKQ0KICAgICAgICAgICAgICAgIH0sIDMwMCksDQogICAgICAgICAgICANCiAgICAgICAgICAgIHN1cHByaW1lclJlc3RhdXJhbnQoaW5kZXgpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlc3RhdXJhbnRzLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgYWpvdXRlclJlc3RhdXJhbnQoJGV2ZW50KSB7DQogICAgICAgICAgICAgICAgLy8gUsOpY3Vww6lyYXRpb24gZHUgZm9ybXVsYWlyZS4gUGFzIGJlc29pbiBkZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yDQogICAgICAgICAgICAgICAgLy8gb3UgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgcHVpc3F1ZSBjJ2VzdCBsZSBmb3JtdWxhaXJlIHF1aSBhIGfDqW7DqXLDqQ0KICAgICAgICAgICAgICAgIC8vIGwnw6l2w6luZW1lbnQNCiAgICAgICAgICAgICAgICBsZXQgZm9ybSA9ICRldmVudC50YXJnZXQ7DQoNCiAgICAgICAgICAgICAgICAvLyBSw6ljdXDDqXJhdGlvbiBkZXMgdmFsZXVycyBkZXMgY2hhbXBzIGR1IGZvcm11bGFpcmUNCiAgICAgICAgICAgICAgICAvLyBlbiBwcsOpdmlzaW9uIGQndW4gZW52b2kgbXVsdGlwYXJ0IGVuIGFqYXgvZmV0Y2gNCiAgICAgICAgICAgICAgICBsZXQgZG9ubmVlc0Zvcm11bGFpcmUgPSBuZXcgRm9ybURhdGEoZm9ybSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcmVzdGF1cmFudHMiOw0KDQogICAgICAgICAgICAgICAgZmV0Y2godXJsLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBkb25uZWVzRm9ybXVsYWlyZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZUpTT04pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzSlMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFpbnRlbmFudCByZXMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNKUy5tc2cpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudEZyb21TZXJ2ZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gIiI7DQogICAgICAgICAgICAgICAgdGhpcy5jdWlzaW5lID0gIiI7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZ2V0Q29sb3IoaW5kZXgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gKGluZGV4ICUgMikgPyAnbGlnaHRCbHVlJyA6ICdwaW5rJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbW91bnRlZCgpIHsNCiAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudEZyb21TZXJ2ZXIoKTsNCiAgICAgICAgfQ0KfQ0K"},{"version":3,"sources":["ListeDesRestaurants.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListeDesRestaurants.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"hello\">\r\n    <form @submit=\"ajouterRestaurant($event)\">\r\n        <label>\r\n            Nom : <input name=\"nom\" type=\"text\" required v-model=\"name\">\r\n        </label>\r\n        <label>\r\n            Cuisine : <input name=\"cuisine\" type=\"text\" required v-model=\"cuisine\">\r\n        </label>\r\n\r\n        <md-button>Ajouter</md-button>\r\n    </form>\r\n\r\n    <h1>Nombre de restaurants : {{totalRestaurant}}</h1>\r\n    <p>Chercher par nom : <input @input=\"chercherRestaurant()\" type=\"text\" v-model=\"nomRecherche\"></p>\r\n    <p>Nombre de page total : {{nbPageTotal}}</p>\r\n    <p>Nombre de restaurant par page : \r\n        <input \r\n        @change=\"getRestaurantFromServer()\"\r\n        type=\"range\" min=2 max=100 value=10 v-model=\"pageSize\"\r\n        >{{pageSize}}</p>\r\n    <md-button class=\"md-raised\" :disabled=\"page===0\" @click=\"pagePrecedent()\">Précédent</md-button>&nbsp;&nbsp;\r\n    <md-button class=\"md-raised\" :disabled=\"page===nbPageTotal\" @click=\"pageSuivante()\">Suivant</md-button>&nbsp;\r\n    Page courante : {{page}}\r\n    <br>\r\n    <md-table v-model=\"restaurants\" md-sort=\"name\" md-sort-order=\"asc\">\r\n        <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\">\r\n          <md-table-cell md-label=\"Nom\">{{ item.name }}</md-table-cell>\r\n          <md-table-cell md-label=\"Cuisine\">{{ item.cuisine }}</md-table-cell>\r\n        </md-table-row>\r\n    </md-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\";\r\n\r\nexport default {\r\n  name: 'ListeDesRestaurants',\r\n  data: function() { \r\n            return {\r\n                restaurants: [],\r\n                name: '',\r\n                cuisine: '',\r\n                totalRestaurant: 0,\r\n                page: 0,\r\n                pageSize: 10,\r\n                nbPageTotal: 0,\r\n                nomRecherche: ''\r\n            }\r\n    },\r\n        methods: {\r\n            pagePrecedent() {\r\n                if (this.page === 0) return;\r\n                this.page--;\r\n                this.getRestaurantFromServer();\r\n            },\r\n            pageSuivante() {\r\n                if (this.page === this.dernierePage) return;\r\n                this.page++;\r\n                this.getRestaurantFromServer();\r\n            },\r\n            getRestaurantFromServer() {\r\n                let url = \"http://localhost:8080/api/restaurants?\";\r\n                url += \"page=\" + this.page;\r\n                url += \"&pagesize=\" + this.pageSize;\r\n                url += \"&name=\" + this.nomRecherche;\r\n\r\n                fetch(url)\r\n                    .then((responseJSON) => {\r\n                        responseJSON.json()\r\n                            .then((resJS) => {\r\n                                // Maintenant res est un vrai objet JavaScript\r\n                                this.restaurants = resJS.data;\r\n                                this.totalRestaurant = resJS.count;\r\n                                this.nbPageTotal = Math.round(this.totalRestaurant / this.pageSize);\r\n                            });\r\n                    })\r\n                    .catch((err) => {\r\n                        console.log(err);\r\n                    });\r\n            },\r\n            chercherRestaurant:\r\n                _.debounce(function () {\r\n                    this.getRestaurantFromServer()\r\n                }, 300),\r\n            \r\n            supprimerRestaurant(index) {\r\n                this.restaurants.splice(index, 1);\r\n            },\r\n            ajouterRestaurant($event) {\r\n                // Récupération du formulaire. Pas besoin de document.querySelector\r\n                // ou document.getElementById puisque c'est le formulaire qui a généré\r\n                // l'événement\r\n                let form = $event.target;\r\n\r\n                // Récupération des valeurs des champs du formulaire\r\n                // en prévision d'un envoi multipart en ajax/fetch\r\n                let donneesFormulaire = new FormData(form);\r\n\r\n                let url = \"http://localhost:8080/api/restaurants\";\r\n\r\n                fetch(url, {\r\n                    method: \"POST\",\r\n                    body: donneesFormulaire\r\n                })\r\n                    .then((responseJSON) => {\r\n                        responseJSON.json()\r\n                            .then((resJS) => {\r\n                                // Maintenant res est un vrai objet JavaScript\r\n                                console.log(resJS.msg)\r\n                                this.getRestaurantFromServer();\r\n                            });\r\n                    })\r\n                    .catch(function (err) {\r\n                        console.log(err);\r\n                    });\r\n\r\n                this.name = \"\";\r\n                this.cuisine = \"\";\r\n            },\r\n            getColor(index) {\r\n                return (index % 2) ? 'lightBlue' : 'pink';\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getRestaurantFromServer();\r\n        }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n"]}]}